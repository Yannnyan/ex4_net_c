Introduction

   This document defines a specific protocol, DNS over HTTPS (DoH), for
   sending DNS [RFC1035] queries and getting DNS responses over HTTP
   [RFC7540] using https [RFC2818] URIs (and therefore TLS [RFC8446]
   security for integrity and confidentiality).  Each DNS query-response
   pair is mapped into an HTTP exchange.

   The described approach is more than a tunnel over HTTP.  It
   establishes default media formatting types for requests and responses
   but uses normal HTTP content negotiation mechanisms for selecting
   alternatives that endpoints may prefer in anticipation of serving new
   use cases.  In addition to this media type negotiation, it aligns
   itself with HTTP features such as caching, redirection, proxying,
   authentication, and compression.

   The integration with HTTP provides a transport suitable for both
   existing DNS clients and native web applications seeking access to
   the DNS.

   Two primary use cases were considered during this protocol's
   development.  These use cases are preventing on-path devices from
   interfering with DNS operations, and also allowing web applications
   to access DNS information via existing browser APIs in a safe way
   consistent with Cross Origin Resource Sharing (CORS) [FETCH].  No
   special effort has been taken to enable or prevent application to
   other use cases.  This document focuses on communication between DNS
   clients (such as operating system stub resolvers) and recursive
   resolvers.

2.  Terminology

   A server that supports this protocol is called a "DoH server" to
   differentiate it from a "DNS server" (one that only provides DNS
   service over one or more of the other transport protocols
   standardized for DNS).  Similarly, a client that supports this
   protocol is called a "DoH client".

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.